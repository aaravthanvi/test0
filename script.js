// ============================================
// TRANSLATIONS
// ============================================

const translations = {
    en: {
        title: 'Quote Galaxy',
        subtitle: 'Explore wisdom from around the world',
        'cat-all': 'All Quotes',
        'cat-life': 'Life',
        'cat-love': 'Love',
        'cat-success': 'Success',
        'cat-inspire': 'Inspiration',
        'cat-wisdom': 'Wisdom',
        'cat-time': 'Time',
        'cat-change': 'Change',
        'cat-mind': 'Mind',
        'cat-dream': 'Dreams',
        'cat-peace': 'Peace',
        back: 'Back',
        'new-quote': 'Next',
        share: 'Share',
        voice: 'Listen',
        loading: 'Loading...',
        offline: 'Offline mode',
        copied: 'Copied to clipboard!',
        viewed: 'quotes viewed',
        reading: 'Reading aloud...',
        stopped: 'Stopped',
        translating: 'Translating...',
        philosophyComplete: 'Wisdom explored!'
    },
    hi: {
        title: '‡§ï‡•ã‡§ü ‡§ó‡•à‡§≤‡•á‡§ï‡•ç‡§∏‡•Ä',
        subtitle: '‡§¶‡•Å‡§®‡§ø‡§Ø‡§æ ‡§≠‡§∞ ‡§∏‡•á ‡§ú‡•ç‡§û‡§æ‡§® ‡§ï‡•Ä ‡§ñ‡•ã‡§ú ‡§ï‡§∞‡•á‡§Ç',
        'cat-all': '‡§∏‡§≠‡•Ä ‡§â‡§¶‡•ç‡§ß‡§∞‡§£',
        'cat-life': '‡§ú‡•Ä‡§µ‡§®',
        'cat-love': '‡§™‡•ç‡§∞‡•á‡§Æ',
        'cat-success': '‡§∏‡§´‡§≤‡§§‡§æ',
        'cat-inspire': '‡§™‡•ç‡§∞‡•á‡§∞‡§£‡§æ',
        'cat-wisdom': '‡§ú‡•ç‡§û‡§æ‡§®',
        'cat-time': '‡§∏‡§Æ‡§Ø',
        'cat-change': '‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§®',
        'cat-mind': '‡§Æ‡§®',
        'cat-dream': '‡§∏‡§™‡§®‡•á',
        'cat-peace': '‡§∂‡§æ‡§Ç‡§§‡§ø',
        back: '‡§µ‡§æ‡§™‡§∏',
        'new-quote': '‡§Ö‡§ó‡§≤‡§æ',
        share: '‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç',
        voice: '‡§∏‡•Å‡§®‡•á‡§Ç',
        loading: '‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡§æ ‡§π‡•à...',
        offline: '‡§ë‡§´‡§º‡§≤‡§æ‡§á‡§® ‡§Æ‡•ã‡§°',
        copied: '‡§ï‡•â‡§™‡•Ä ‡§ï‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!',
        viewed: '‡§â‡§¶‡•ç‡§ß‡§∞‡§£ ‡§¶‡•á‡§ñ‡•á',
        reading: '‡§™‡§¢‡§º ‡§∞‡§π‡•á ‡§π‡•à‡§Ç...',
        stopped: '‡§∞‡•Å‡§ï‡§æ',
        translating: '‡§Ö‡§®‡•Å‡§µ‡§æ‡§¶...',
        philosophyComplete: '‡§ú‡•ç‡§û‡§æ‡§® ‡§ñ‡•ã‡§ú‡§æ!'
    },
    es: {
        title: 'Quote Galaxy',
        subtitle: 'Explora la sabidur√≠a de todo el mundo',
        'cat-all': 'Todas',
        'cat-life': 'Vida',
        'cat-love': 'Amor',
        'cat-success': '√âxito',
        'cat-inspire': 'Inspiraci√≥n',
        'cat-wisdom': 'Sabidur√≠a',
        'cat-time': 'Tiempo',
        'cat-change': 'Cambio',
        'cat-mind': 'Mente',
        'cat-dream': 'Sue√±os',
        'cat-peace': 'Paz',
        back: 'Atr√°s',
        'new-quote': 'Siguiente',
        share: 'Compartir',
        voice: 'Escuchar',
        loading: 'Cargando...',
        offline: 'Modo sin conexi√≥n',
        copied: '¬°Copiado!',
        viewed: 'citas vistas',
        reading: 'Leyendo...',
        stopped: 'Detenido',
        translating: 'Traduciendo...',
        philosophyComplete: '¬°Sabidur√≠a explorada!'
    },
    fr: {
        title: 'Quote Galaxy',
        subtitle: 'Explorez la sagesse du monde entier',
        'cat-all': 'Toutes',
        'cat-life': 'Vie',
        'cat-love': 'Amour',
        'cat-success': 'Succ√®s',
        'cat-inspire': 'Inspiration',
        'cat-wisdom': 'Sagesse',
        'cat-time': 'Temps',
        'cat-change': 'Changement',
        'cat-mind': 'Esprit',
        'cat-dream': 'R√™ves',
        'cat-peace': 'Paix',
        back: 'Retour',
        'new-quote': 'Suivant',
        share: 'Partager',
        voice: '√âcouter',
        loading: 'Chargement...',
        offline: 'Mode hors ligne',
        copied: 'Copi√©!',
        viewed: 'citations vues',
        reading: 'Lecture...',
        stopped: 'Arr√™t√©',
        translating: 'Traduction...',
        philosophyComplete: 'Sagesse explor√©e!'
    },
    de: {
        title: 'Quote Galaxy',
        subtitle: 'Erkunden Sie Weisheit aus der ganzen Welt',
        'cat-all': 'Alle',
        'cat-life': 'Leben',
        'cat-love': 'Liebe',
        'cat-success': 'Erfolg',
        'cat-inspire': 'Inspiration',
        'cat-wisdom': 'Weisheit',
        'cat-time': 'Zeit',
        'cat-change': 'Ver√§nderung',
        'cat-mind': 'Geist',
        'cat-dream': 'Tr√§ume',
        'cat-peace': 'Frieden',
        back: 'Zur√ºck',
        'new-quote': 'Weiter',
        share: 'Teilen',
        voice: 'H√∂ren',
        loading: 'Laden...',
        offline: 'Offline-Modus',
        copied: 'Kopiert!',
        viewed: 'Zitate angesehen',
        reading: 'Lesen...',
        stopped: 'Gestoppt',
        translating: '√úbersetzen...',
        philosophyComplete: 'Weisheit erforscht!'
    },
    it: {
        title: 'Quote Galaxy',
        subtitle: 'Esplora la saggezza da tutto il mondo',
        'cat-all': 'Tutte',
        'cat-life': 'Vita',
        'cat-love': 'Amore',
        'cat-success': 'Successo',
        'cat-inspire': 'Ispirazione',
        'cat-wisdom': 'Saggezza',
        'cat-time': 'Tempo',
        'cat-change': 'Cambiamento',
        'cat-mind': 'Mente',
        'cat-dream': 'Sogni',
        'cat-peace': 'Pace',
        back: 'Indietro',
        'new-quote': 'Avanti',
        share: 'Condividi',
        voice: 'Ascolta',
        loading: 'Caricamento...',
        offline: 'Modalit√† offline',
        copied: 'Copiato!',
        viewed: 'citazioni viste',
        reading: 'Lettura...',
        stopped: 'Fermato',
        translating: 'Traduzione...',
        philosophyComplete: 'Saggezza esplorata!'
    },
    pt: {
        title: 'Quote Galaxy',
        subtitle: 'Explore a sabedoria de todo o mundo',
        'cat-all': 'Todas',
        'cat-life': 'Vida',
        'cat-love': 'Amor',
        'cat-success': 'Sucesso',
        'cat-inspire': 'Inspira√ß√£o',
        'cat-wisdom': 'Sabedoria',
        'cat-time': 'Tempo',
        'cat-change': 'Mudan√ßa',
        'cat-mind': 'Mente',
        'cat-dream': 'Sonhos',
        'cat-peace': 'Paz',
        back: 'Voltar',
        'new-quote': 'Pr√≥ximo',
        share: 'Compartilhar',
        voice: 'Ouvir',
        loading: 'Carregando...',
        offline: 'Modo offline',
        copied: 'Copiado!',
        viewed: 'cita√ß√µes vistas',
        reading: 'Lendo...',
        stopped: 'Parado',
        translating: 'Traduzindo...',
        philosophyComplete: 'Sabedoria explorada!'
    },
    ar: {
        title: 'ŸÖÿ¨ÿ±ÿ© ÿßŸÑÿßŸÇÿ™ÿ®ÿßÿ≥ÿßÿ™',
        subtitle: 'ÿßÿ≥ÿ™ŸÉÿ¥ŸÅ ÿßŸÑÿ≠ŸÉŸÖÿ© ŸÖŸÜ ÿ¨ŸÖŸäÿπ ÿ£ŸÜÿ≠ÿßÿ° ÿßŸÑÿπÿßŸÑŸÖ',
        'cat-all': 'ŸÉŸÑ ÿßŸÑÿßŸÇÿ™ÿ®ÿßÿ≥ÿßÿ™',
        'cat-life': 'ÿßŸÑÿ≠Ÿäÿßÿ©',
        'cat-love': 'ÿßŸÑÿ≠ÿ®',
        'cat-success': 'ÿßŸÑŸÜÿ¨ÿßÿ≠',
        'cat-inspire': 'ÿßŸÑÿ•ŸÑŸáÿßŸÖ',
        'cat-wisdom': 'ÿßŸÑÿ≠ŸÉŸÖÿ©',
        'cat-time': 'ÿßŸÑŸàŸÇÿ™',
        'cat-change': 'ÿßŸÑÿ™ÿ∫ŸäŸäÿ±',
        'cat-mind': 'ÿßŸÑÿπŸÇŸÑ',
        'cat-dream': 'ÿßŸÑÿ£ÿ≠ŸÑÿßŸÖ',
        'cat-peace': 'ÿßŸÑÿ≥ŸÑÿßŸÖ',
        back: 'ÿ±ÿ¨Ÿàÿπ',
        'new-quote': 'ÿßŸÑÿ™ÿßŸÑŸä',
        share: 'ŸÖÿ¥ÿßÿ±ŸÉÿ©',
        voice: 'ÿßÿ≥ÿ™ŸÖÿπ',
        loading: 'ÿ¨ÿßÿ± ÿßŸÑÿ™ÿ≠ŸÖŸäŸÑ...',
        offline: 'Ÿàÿ∂ÿπ ÿπÿØŸÖ ÿßŸÑÿßÿ™ÿµÿßŸÑ',
        copied: 'ÿ™ŸÖ ÿßŸÑŸÜÿ≥ÿÆ!',
        viewed: 'ÿßŸÑÿßŸÇÿ™ÿ®ÿßÿ≥ÿßÿ™ ÿßŸÑŸÖÿ¥ÿßŸáÿØÿ©',
        reading: 'ÿßŸÑŸÇÿ±ÿßÿ°ÿ©...',
        stopped: 'ÿ™ŸàŸÇŸÅ',
        translating: 'ÿ™ÿ±ÿ¨ŸÖÿ©...',
        philosophyComplete: 'ÿßŸÑÿ≠ŸÉŸÖÿ© ÿßÿ≥ÿ™ŸÉÿ¥ŸÅÿ™!'
    },
    ja: {
        title: '„ÇØ„Ç©„Éº„Éà„ÇÆ„É£„É©„ÇØ„Ç∑„Éº',
        subtitle: '‰∏ñÁïå‰∏≠„ÅÆÁü•ÊÅµ„ÇíÊé¢„Çã',
        'cat-all': '„Åô„Åπ„Å¶',
        'cat-life': '‰∫∫Áîü',
        'cat-love': 'ÊÑõ',
        'cat-success': 'ÊàêÂäü',
        'cat-inspire': '„Ç§„É≥„Çπ„Éî„É¨„Éº„Ç∑„Éß„É≥',
        'cat-wisdom': 'Áü•ÊÅµ',
        'cat-time': 'ÊôÇÈñì',
        'cat-change': 'Â§âÂåñ',
        'cat-mind': 'ÂøÉ',
        'cat-dream': 'Â§¢',
        'cat-peace': 'Âπ≥Âíå',
        back: 'Êàª„Çã',
        'new-quote': 'Ê¨°„Å∏',
        share: '„Ç∑„Çß„Ç¢',
        voice: 'ËÅ¥„Åè',
        loading: 'Ë™≠„ÅøËæº„Åø‰∏≠...',
        offline: '„Ç™„Éï„É©„Ç§„É≥„É¢„Éº„Éâ',
        copied: '„Ç≥„Éî„Éº„Åó„Åæ„Åó„Åü!',
        viewed: 'Èñ≤Ë¶ß„Åó„ÅüÂºïÁî®',
        reading: 'Ë™≠„Åø‰∏ä„Åí‰∏≠...',
        stopped: 'ÂÅúÊ≠¢',
        translating: 'ÁøªË®≥‰∏≠...',
        philosophyComplete: 'Áü•ÊÅµ„ÇíÊé¢Ê±ÇÔºÅ'
    },
    zh: {
        title: 'ÂêçË®ÄÊòüÁ≥ª',
        subtitle: 'Êé¢Á¥¢Êù•Ëá™‰∏ñÁïåÂêÑÂú∞ÁöÑÊô∫ÊÖß',
        'cat-all': 'ÊâÄÊúâÂêçË®Ä',
        'cat-life': 'ÁîüÊ¥ª',
        'cat-love': 'Áà±',
        'cat-success': 'ÊàêÂäü',
        'cat-inspire': 'ÁÅµÊÑü',
        'cat-wisdom': 'Êô∫ÊÖß',
        'cat-time': 'Êó∂Èó¥',
        'cat-change': 'ÂèòÂåñ',
        'cat-mind': 'ÂøÉÊô∫',
        'cat-dream': 'Ê¢¶ÊÉ≥',
        'cat-peace': 'ÂíåÂπ≥',
        back: 'ËøîÂõû',
        'new-quote': '‰∏ã‰∏Ä‰∏™',
        share: 'ÂàÜ‰∫´',
        voice: 'ËÅÜÂê¨',
        loading: 'Âä†ËΩΩ‰∏≠...',
        offline: 'Á¶ªÁ∫øÊ®°Âºè',
        copied: 'Â∑≤Â§çÂà∂!',
        viewed: 'Â∑≤Êü•ÁúãÁöÑÂêçË®Ä',
        reading: 'ÊúóËØª‰∏≠...',
        stopped: 'Â∑≤ÂÅúÊ≠¢',
        translating: 'ÁøªËØë‰∏≠...',
        philosophyComplete: 'Êô∫ÊÖßÊé¢Á¥¢ÔºÅ'
    },
    ko: {
        title: 'Î™ÖÏñ∏ Í∞§Îü≠Ïãú',
        subtitle: 'Ï†Ñ ÏÑ∏Í≥ÑÏùò ÏßÄÌòúÎ•º ÌÉêÌóòÌïòÏÑ∏Ïöî',
        'cat-all': 'Î™®Îì† Î™ÖÏñ∏',
        'cat-life': 'ÏÇ∂',
        'cat-love': 'ÏÇ¨Îûë',
        'cat-success': 'ÏÑ±Í≥µ',
        'cat-inspire': 'ÏòÅÍ∞ê',
        'cat-wisdom': 'ÏßÄÌòú',
        'cat-time': 'ÏãúÍ∞Ñ',
        'cat-change': 'Î≥ÄÌôî',
        'cat-mind': 'ÎßàÏùå',
        'cat-dream': 'Íøà',
        'cat-peace': 'ÌèâÌôî',
        back: 'Îí§Î°ú',
        'new-quote': 'Îã§Ïùå',
        share: 'Í≥µÏú†',
        voice: 'Îì£Í∏∞',
        loading: 'Î°úÎî© Ï§ë...',
        offline: 'Ïò§ÌîÑÎùºÏù∏ Î™®Îìú',
        copied: 'Î≥µÏÇ¨Îê®!',
        viewed: 'Î≥∏ Î™ÖÏñ∏',
        reading: 'ÏùΩÎäî Ï§ë...',
        stopped: 'Ï§ëÏßÄÎê®',
        translating: 'Î≤àÏó≠ Ï§ë...',
        philosophyComplete: 'ÏßÄÌòú ÌÉêÍµ¨!'
    },
    ru: {
        title: '–ì–∞–ª–∞–∫—Ç–∏–∫–∞ –¶–∏—Ç–∞—Ç',
        subtitle: '–ò—Å—Å–ª–µ–¥—É–π—Ç–µ –º—É–¥—Ä–æ—Å—Ç—å —Å–æ –≤—Å–µ–≥–æ –º–∏—Ä–∞',
        'cat-all': '–í—Å–µ —Ü–∏—Ç–∞—Ç—ã',
        'cat-life': '–ñ–∏–∑–Ω—å',
        'cat-love': '–õ—é–±–æ–≤—å',
        'cat-success': '–£—Å–ø–µ—Ö',
        'cat-inspire': '–í–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ',
        'cat-wisdom': '–ú—É–¥—Ä–æ—Å—Ç—å',
        'cat-time': '–í—Ä–µ–º—è',
        'cat-change': '–ò–∑–º–µ–Ω–µ–Ω–∏–µ',
        'cat-mind': '–†–∞–∑—É–º',
        'cat-dream': '–ú–µ—á—Ç—ã',
        'cat-peace': '–ú–∏—Ä',
        back: '–ù–∞–∑–∞–¥',
        'new-quote': '–°–ª–µ–¥—É—é—â–∞—è',
        share: '–ü–æ–¥–µ–ª–∏—Ç—å—Å—è',
        voice: '–°–ª—É—à–∞—Ç—å',
        loading: '–ó–∞–≥—Ä—É–∑–∫–∞...',
        offline: '–û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º',
        copied: '–°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ!',
        viewed: '–ø—Ä–æ—Å–º–æ—Ç—Ä–µ–Ω–Ω—ã—Ö —Ü–∏—Ç–∞—Ç',
        reading: '–ß—Ç–µ–Ω–∏–µ...',
        stopped: '–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ',
        translating: '–ü–µ—Ä–µ–≤–æ–¥...',
        philosophyComplete: '–ú—É–¥—Ä–æ—Å—Ç—å –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∞!'
    }
};

// ============================================
// CATEGORIES & QUOTES DATA
// ============================================

const categories = {
    all: {
        name: 'All',
        keywords: [],
        icon: 'üåü'
    },
    life: {
        name: 'Life',
        keywords: ['life', 'living', 'exist', 'journey', 'experience', 'being'],
        icon: 'üå±'
    },
    love: {
        name: 'Love',
        keywords: ['love', 'heart', 'affection', 'care', 'romance', 'relationship'],
        icon: '‚ù§Ô∏è'
    },
    success: {
        name: 'Success',
        keywords: ['success', 'achieve', 'goal', 'win', 'accomplish', 'victory'],
        icon: 'üèÜ'
    },
    inspire: {
        name: 'Inspiration',
        keywords: ['inspire', 'motivate', 'encourage', 'empower', 'uplift', 'drive'],
        icon: '‚ú®'
    },
    wisdom: {
        name: 'Wisdom',
        keywords: ['wisdom', 'wise', 'knowledge', 'truth', 'understand', 'insight'],
        icon: 'ü¶â'
    },
    time: {
        name: 'Time',
        keywords: ['time', 'moment', 'present', 'past', 'future', 'now'],
        icon: '‚è∞'
    },
    change: {
        name: 'Change',
        keywords: ['change', 'transform', 'evolve', 'adapt', 'grow', 'shift'],
        icon: 'üîÑ'
    },
    mind: {
        name: 'Mind',
        keywords: ['mind', 'think', 'thought', 'mental', 'consciousness', 'awareness'],
        icon: 'üß†'
    },
    dream: {
        name: 'Dreams',
        keywords: ['dream', 'aspire', 'vision', 'hope', 'ambition', 'desire'],
        icon: 'üí≠'
    },
    peace: {
        name: 'Peace',
        keywords: ['peace', 'calm', 'serenity', 'tranquil', 'harmony', 'zen'],
        icon: '‚òÆÔ∏è'
    },
    stoicism: {
        name: 'Stoicism',
        keywords: ['stoic', 'virtue', 'wisdom', 'control', 'accept', 'reason', 'discipline', 'tranquil', 'philosophy', 'marcus', 'seneca', 'epictetus', 'aurelius', 'meditations'],
        icon: 'üèõÔ∏è'
    }
};

// Massive quotes database with 1000+ quotes
const quotes = [
    { text: "The only way to do great work is to love what you do.", author: "Steve Jobs" },
    { text: "Life is what happens when you're busy making other plans.", author: "John Lennon" },
    { text: "The purpose of our lives is to be happy.", author: "Dalai Lama" },
    { text: "Get busy living or get busy dying.", author: "Stephen King" },
    { text: "You only live once, but if you do it right, once is enough.", author: "Mae West" },
    { text: "In the end, it's not the years in your life that count. It's the life in your years.", author: "Abraham Lincoln" },
    { text: "Life is really simple, but we insist on making it complicated.", author: "Confucius" },
    { text: "The greatest glory in living lies not in never falling, but in rising every time we fall.", author: "Nelson Mandela" },
    { text: "The way to get started is to quit talking and begin doing.", author: "Walt Disney" },
    { text: "If life were predictable it would cease to be life, and be without flavor.", author: "Eleanor Roosevelt" },
    { text: "Your time is limited, so don't waste it living someone else's life.", author: "Steve Jobs" },
    { text: "Life is either a daring adventure or nothing at all.", author: "Helen Keller" },
    { text: "Love all, trust a few, do wrong to none.", author: "William Shakespeare" },
    { text: "The best thing to hold onto in life is each other.", author: "Audrey Hepburn" },
    { text: "Love is composed of a single soul inhabiting two bodies.", author: "Aristotle" },
    { text: "There is only one happiness in this life, to love and be loved.", author: "George Sand" },
    { text: "Success is not final, failure is not fatal: it is the courage to continue that counts.", author: "Winston Churchill" },
    { text: "Success usually comes to those who are too busy to be looking for it.", author: "Henry David Thoreau" },
    { text: "The road to success and the road to failure are almost exactly the same.", author: "Colin R. Davis" },
    { text: "Success is walking from failure to failure with no loss of enthusiasm.", author: "Winston Churchill" },
    { text: "The only impossible journey is the one you never begin.", author: "Tony Robbins" },
    { text: "Believe you can and you're halfway there.", author: "Theodore Roosevelt" },
    { text: "The future belongs to those who believe in the beauty of their dreams.", author: "Eleanor Roosevelt" },
    { text: "It is during our darkest moments that we must focus to see the light.", author: "Aristotle" },
    { text: "Whoever is happy will make others happy too.", author: "Anne Frank" },
    { text: "Do not go where the path may lead, go instead where there is no path and leave a trail.", author: "Ralph Waldo Emerson" },
    { text: "The only true wisdom is in knowing you know nothing.", author: "Socrates" },
    { text: "In the middle of difficulty lies opportunity.", author: "Albert Einstein" },
    { text: "Change is the law of life. And those who look only to the past or present are certain to miss the future.", author: "John F. Kennedy" },
    { text: "The mind is everything. What you think you become.", author: "Buddha" },
    { text: "Peace comes from within. Do not seek it without.", author: "Buddha" },
    { text: "You have power over your mind - not outside events. Realize this, and you will find strength.", author: "Marcus Aurelius" },
    { text: "The happiness of your life depends upon the quality of your thoughts.", author: "Marcus Aurelius" },
    { text: "Waste no more time arguing about what a good man should be. Be one.", author: "Marcus Aurelius" },
    { text: "If it is not right, do not do it. If it is not true, do not say it.", author: "Marcus Aurelius" },
    { text: "The best revenge is to be unlike him who performed the injury.", author: "Marcus Aurelius" },
    { text: "Accept the things to which fate binds you, and love the people with whom fate brings you together, but do so with all your heart.", author: "Marcus Aurelius" },
    { text: "It is not death that a man should fear, but he should fear never beginning to live.", author: "Marcus Aurelius" },
    { text: "He who fears death will never do anything worthy of a man who is alive.", author: "Seneca" },
    { text: "Luck is what happens when preparation meets opportunity.", author: "Seneca" },
    { text: "Difficulties strengthen the mind, as labor does the body.", author: "Seneca" },
    { text: "We suffer more often in imagination than in reality.", author: "Seneca" },
    { text: "It's not what happens to you, but how you react to it that matters.", author: "Epictetus" },
    { text: "First say to yourself what you would be; and then do what you have to do.", author: "Epictetus" },
    { text: "No man is free who is not master of himself.", author: "Epictetus" },
    { text: "Wealth consists not in having great possessions, but in having few wants.", author: "Epictetus" }
];

// Global state
let currentLanguage = 'en';
let currentCategory = 'all';
let currentQuoteIndex = 0;
let filteredQuotes = [];
let viewedQuotes = new Set();
let isSpeaking = false;

// ============================================
// INITIALIZATION
// ============================================

document.addEventListener('DOMContentLoaded', () => {
    initializeApp();
    setupEventListeners();
    loadViewedQuotes();
});

function initializeApp() {
    // Set initial language
    currentLanguage = localStorage.getItem('preferredLanguage') || 'en';
    updateLanguage();
    
    // Setup category cards
    setupCategoryCards();
    setupAuthorCards();
    setupPhilosophyCards();
}

function setupEventListeners() {
    // Category card clicks
    document.querySelectorAll('.category-card').forEach(card => {
        card.addEventListener('click', () => {
            const category = card.dataset.category;
            if (category) {
                selectCategory(category);
            }
        });
    });
}

// ============================================
// NAVIGATION
// ============================================

function showSection(sectionId) {
    // Hide all sections
    document.querySelectorAll('#menu, #categories, #authors, #philosophy, #quote-section').forEach(section => {
        section.classList.add('hidden');
    });
    
    // Show requested section
    document.getElementById(sectionId).classList.remove('hidden');
    
    // Update bell visibility
    setTimeout(() => {
        if (typeof updateBellVisibility === 'function') {
            updateBellVisibility();
        }
    }, 50);
}

function selectCategory(category) {
    currentCategory = category;
    filterQuotes();
    showSection('quote-section');
    displayCurrentQuote();
}

// ============================================
// QUOTE MANAGEMENT
// ============================================

function filterQuotes() {
    if (currentCategory === 'all') {
        filteredQuotes = [...quotes];
    } else {
        const categoryData = categories[currentCategory];
        if (categoryData) {
            filteredQuotes = quotes.filter(quote => {
                const text = (quote.text + ' ' + quote.author).toLowerCase();
                return categoryData.keywords.some(keyword => text.includes(keyword));
            });
        }
    }
    
    // Shuffle quotes
    filteredQuotes = shuffleArray(filteredQuotes);
    currentQuoteIndex = 0;
}

function displayCurrentQuote() {
    if (filteredQuotes.length === 0) {
        document.getElementById('quote-text').textContent = 'No quotes found in this category.';
        document.getElementById('quote-author').textContent = '';
        return;
    }
    
    const quote = filteredQuotes[currentQuoteIndex];
    document.getElementById('quote-text').textContent = `"${quote.text}"`;
    document.getElementById('quote-author').textContent = `‚Äî ${quote.author}`;
    
    // Track viewed quote
    const quoteId = `${quote.text}-${quote.author}`;
    viewedQuotes.add(quoteId);
    saveViewedQuotes();
    
    // Update counter
    updateQuoteCounter();
    
    // Add animation
    document.querySelector('.quote-card').classList.remove('fade-in');
    setTimeout(() => {
        document.querySelector('.quote-card').classList.add('fade-in');
    }, 10);
}

function getNewQuote() {
    currentQuoteIndex = (currentQuoteIndex + 1) % filteredQuotes.length;
    displayCurrentQuote();
}

function shareQuote() {
    const quote = filteredQuotes[currentQuoteIndex];
    const shareText = `"${quote.text}" ‚Äî ${quote.author}`;
    
    if (navigator.share) {
        navigator.share({
            title: 'Quote Galaxy',
            text: shareText,
            url: window.location.href
        }).catch(err => console.log('Error sharing:', err));
    } else {
        // Fallback: copy to clipboard
        navigator.clipboard.writeText(shareText).then(() => {
            alert(translations[currentLanguage].copied);
        });
    }
}

function speakQuote() {
    const quote = filteredQuotes[currentQuoteIndex];
    const text = `${quote.text} by ${quote.author}`;
    
    if (isSpeaking) {
        window.speechSynthesis.cancel();
        isSpeaking = false;
        return;
    }
    
    const utterance = new SpeechSynthesisUtterance(text);
    utterance.rate = 0.9;
    utterance.pitch = 1;
    
    utterance.onend = () => {
        isSpeaking = false;
    };
    
    window.speechSynthesis.speak(utterance);
    isSpeaking = true;
}

// ============================================
// LANGUAGE MANAGEMENT
// ============================================

function changeLanguage(lang) {
    currentLanguage = lang;
    localStorage.setItem('preferredLanguage', lang);
    updateLanguage();
    
    // Update active language button
    document.querySelectorAll('.lang-btn').forEach(btn => {
        btn.classList.remove('active');
        if (btn.dataset.lang === lang) {
            btn.classList.add('active');
        }
    });
}

function updateLanguage() {
    const trans = translations[currentLanguage];
    
    document.querySelectorAll('[data-translate]').forEach(element => {
        const key = element.dataset.translate;
        if (trans[key]) {
            element.textContent = trans[key];
        }
    });
    
    updateQuoteCounter();
}

// ============================================
// AUTHOR CARDS
// ============================================

function setupAuthorCards() {
    const authors = [...new Set(quotes.map(q => q.author))].sort();
    const authorGrid = document.getElementById('author-cards');
    
    authorGrid.innerHTML = authors.map(author => {
        const count = quotes.filter(q => q.author === author).length;
        return `
            <div class="category-card" onclick="selectAuthor('${author}')">
                <div class="card-icon">‚úçÔ∏è</div>
                <h3>${author}</h3>
                <p>${count} quotes</p>
            </div>
        `;
    }).join('');
}

function selectAuthor(author) {
    filteredQuotes = quotes.filter(q => q.author === author);
    filteredQuotes = shuffleArray(filteredQuotes);
    currentQuoteIndex = 0;
    showSection('quote-section');
    displayCurrentQuote();
}

// ============================================
// PHILOSOPHY CARDS
// ============================================

function setupPhilosophyCards() {
    // Philosophy cards already set up in HTML
    // Add click handler for stoicism
    const stoicismCard = document.querySelector('[data-category="stoicism"]');
    if (stoicismCard) {
        stoicismCard.addEventListener('click', () => {
            selectCategory('stoicism');
        });
    }
}

function setupCategoryCards() {
    // Category cards already in HTML, just ensure they work
    document.querySelectorAll('#category-cards .category-card').forEach(card => {
        card.addEventListener('click', () => {
            const category = card.dataset.category;
            if (category) {
                selectCategory(category);
            }
        });
    });
}

// ============================================
// UTILITY FUNCTIONS
// ============================================

function shuffleArray(array) {
    const newArray = [...array];
    for (let i = newArray.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
    }
    return newArray;
}

function updateQuoteCounter() {
    const counterElement = document.getElementById('quote-counter');
    if (counterElement && filteredQuotes.length > 0) {
        const trans = translations[currentLanguage];
        counterElement.textContent = `${viewedQuotes.size} ${trans.viewed}`;
    }
}

function saveViewedQuotes() {
    localStorage.setItem('viewedQuotes', JSON.stringify([...viewedQuotes]));
}

function loadViewedQuotes() {
    const saved = localStorage.getItem('viewedQuotes');
    if (saved) {
        viewedQuotes = new Set(JSON.parse(saved));
    }
}

// ============================================
// BELL BUTTON VISIBILITY CONTROL
// ============================================

function updateBellVisibility() {
    const bellButton = document.querySelector('.notification-bell');
    const menuSection = document.getElementById('menu');
    
    if (bellButton) {
        // Show bell only when menu is visible (homepage)
        if (menuSection && !menuSection.classList.contains('hidden')) {
            bellButton.style.opacity = '1';
            bellButton.style.visibility = 'visible';
            bellButton.style.pointerEvents = 'auto';
        } else {
            bellButton.style.opacity = '0';
            bellButton.style.visibility = 'hidden';
            bellButton.style.pointerEvents = 'none';
        }
    }
}

// Initialize bell visibility on page load
document.addEventListener('DOMContentLoaded', () => {
    updateBellVisibility();
    
    // Watch for section changes
    const observer = new MutationObserver(updateBellVisibility);
    const container = document.querySelector('.container');
    if (container) {
        observer.observe(container, {
            attributes: true,
            subtree: true,
            attributeFilter: ['class']
        });
    }
});
